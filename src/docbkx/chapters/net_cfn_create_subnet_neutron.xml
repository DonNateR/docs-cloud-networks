<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
        <!-- Some useful entities borrowed from HTML -->
        <!ENTITY ndash  "&#x2013;">
        <!ENTITY mdash  "&#x2014;">
        <!ENTITY hellip "&#x2026;">
        
        <!-- Useful for describing APIs -->
        <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
        <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
        <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
        <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
     
        <!ENTITY CIS 'Rackspace Cloud Identity Service'>
<!ENTITY fgCS 'first generation Cloud Servers'>
<!ENTITY ngCS 'next generation Cloud Servers'>
<!ENTITY cnresource1 'rax-networks'>
<!ENTITY virt_ext 'Cloud Networks virtual interface extension'>
<!ENTITY cnresource2 'os-networksv2'>
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:raxm="http://docs.rackspace.com/api/metadata" version="5.0"
    xml:id="create_subnet_neutron">
    <title>Step 2. Create a Subnet</title>
    <para>After creating a network, you can create a subnet. </para>
    <para>To create a subnet, you specify a network, an IP address, and a name for your subnet.</para>
    <para>After you create a subnet, copy its subnet ID for future reference.</para>
    <sidebar>
        <para><emphasis role="bold">Next step:</emphasis> Choose one of the following methods:<itemizedlist>
                <listitem>
                    <para><olink targetdoc="cn-gettingstarted" targetptr="neutron_create_network_neutron">“Create a Subnet
                            with the neutron Client ”</olink></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="cn-gettingstarted" targetptr="curl_create_network_neutron">“Create a Subnet with
                            cURL”</olink></para>
                </listitem>
            </itemizedlist></para>
    </sidebar>
    <?hard-pagebreak?>
    <section xml:id="neutron_create_subnet_neutron">
        <title>Create a Subnet with the neutron Client </title>
        <para>
            <procedure>
                <title>To create a subnet with the neutron client</title>
                <step>
                    <para>Issue the following neutron command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 75%?>
<prompt>$</prompt> neutron subnet-create &lt;amp&gt; &lt;120.1.2.0/24&gt; --name &lt;Subamp&gt;</programlisting></para>
                    <para><emphasis role="bold">Positional arguments:</emphasis></para>
                    <para>
                        <itemizedlist>
                            <listitem>
                                <para>The name of the network you previously created. In this example, the name is
                                        <literal>amp</literal>.</para>
                            </listitem>
                            <listitem>
                                <para>The IP address and port you want to use for the subnet. In this example, the address is
                                        <literal>120.1.2.0/24</literal></para>
                            </listitem>
                            <listitem>
                                <para><parameter>name</parameter>. The name for the new subnet. In this example, the name is
                                        <literal>Subamp</literal>.</para>
                            </listitem>
                        </itemizedlist>
                    </para>
                    <para><emphasis role="bold">Output:</emphasis></para>
                    <para>The command returns the response, as shown in the following output:</para>
                    <informalexample>
                        <screen><computeroutput><?db-font-size 75%?>
+------------------+----------------------------------------------+
| Field            | Value                                        |
+------------------+----------------------------------------------+
| allocation_pools | {"start": "120.1.2.2", "end": "120.1.2.254"} |
| cidr             | 120.1.2.0/24                                 |
| dns_nameservers  |                                              |
| enable_dhcp      | True                                         |
| gateway_ip       | 120.1.2.1                                    |
| host_routes      |                                              |
| id               | 23e3059e-4f39-4f7f-8cf2-c326e5de6c37         |
| ip_version       | 4                                            |
| name             | Subamp                                       |
| network_id       | 29f52c7e-6efd-4335-a14a-db77d32a2555         |
| tenant_id        | 53501b3c25d34f8ea293c03298caed60             |
+------------------+----------------------------------------------+</computeroutput></screen>
                    </informalexample>
                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output for future reference.</para>
                </step>
            </procedure>
        </para>
        <sidebar>
            <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted"
                    targetptr="list_networks_neutron">“Step 3. List Networks”</olink></para>
        </sidebar>
    </section>
    <?hard-pagebreak?>
    <section xml:id="curl_create_subnet_neutron">
        <title>Create a Subnet with cURL</title>
        <para>You can request a JSON or XML response when you issue a request in a cURL command.</para>
        <section xml:id="json_create_subnet_neutron">
            <title>JSON Request and Response</title>
            <procedure>
                <title>To create a subnet and request a JSON response</title>
                <step>
                    <para>Issue the following cURL command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -s https://dfw.servers.api.rackspacecloud.com/v2/$account/subnets \
       -X POST \
       -H "Content-Type: application/json" \
       -H "Accept: application/json" \
       -H "X-Auth-Token: $token" \
       -d '{"subnets":[{"cidr":"120.1.2.0/24","ip_version":4,"network_id":"29f52c7e-6efd-4335-a14a-db77d32a2555"}]}' \
       | python -m json.tool</programlisting></para>
                    <para>In this cURL command, you specify several options. For information about options, see <olink
                            targetdoc="cn-gettingstarted" targetptr="curl_options">Table 2, “cURL Command-Line
                            Options”</olink>.</para>
                    <para><emphasis role="bold">Output:</emphasis>
                    </para>
                    <para>The operation returns the response body, as shown in the following JSON response:
                        <!--<programlisting language="json"><?db-font-size 65%?>
                            <xi:include href="../../common/samples/network-post-resp.json" parse="text"/></programlisting>--></para>
                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output for future reference.</para>
                </step>
            </procedure>
            <sidebar>
                <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted"
                        targetptr="list_networks_neutron">“Step 3. List Networks”</olink></para>
            </sidebar>
        </section>
        <section xml:id="xml_create_subnet_neutron">
            <title>XML Request and Response</title>
            <procedure>
                <title>To create a subnet and request a XML response</title>
                <step>
                    <para>Issue the following cURL command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -s https://dfw.servers.api.rackspacecloud.com/v2/$account/subnets \
          -X POST -H "X-Auth-Project-Id: $account" -H "Content-Type: application/xml" \
          -H "Accept: application/xml" \
          -H "X-Auth-Token: $token" \
          -d '{"subnets":[{"cidr":"120.1.2.0/24","ip_version":4,"network_id":"29f52c7e-6efd-4335-a14a-db77d32a2555"}]}' \
       | python -m json.tool</programlisting></para>
                    <para><emphasis role="bold">Output:</emphasis>
                    </para>
                    <para>The operation returns the response body, as shown in the following XML response:
                        <!--<programlisting language="xml"><?db-font-size 65%?>
                            <xi:include href="../../common/samples/network-post-resp.xml" parse="text"/></programlisting>--></para>
                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output for future reference.</para>
                </step>
            </procedure>
            <sidebar>
                <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted"
                        targetptr="list_networks_neutron">“Step 3. List Networks”</olink></para>
            </sidebar>
        </section>
    </section>
</section>
