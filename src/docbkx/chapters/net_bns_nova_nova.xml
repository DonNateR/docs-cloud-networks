<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % common  SYSTEM "../../common/common.ent">
%common;
]>
<section xml:id="bns_nova_nova" xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:raxm="http://docs.rackspace.com/api/metadata" version="5.0">
    <title>Boot server with nova-network API and nova client</title>
    <para>These sections walk you through the steps to provision a new server, attaching the network directly to the server,
        and to list your servers by using the nova-network API.</para>
    <sidebar>
        <para><emphasis role="bold">Start here: </emphasis><olink targetdoc="cn-gettingstarted"
                targetptr="nova_create_server_nova">“Provision a server with an isolated network (nova-network API/nova
                client)”</olink></para>
    </sidebar>

    <!--Writer:  Keep this sections in sync with xml:id="neutron_create_server_nova". Content is basically same but command, 
        heading, and links are different-->
    <section xml:id="nova_create_server_nova">
        <title>Provision a server with an isolated network (nova-network API/nova client)</title>
        <para>To create your new server and attach an isolated network, you need the following information: </para>

        <itemizedlist>
            <listitem>
                <para>The name of the new server. Use a name of your choice.</para>
            </listitem>
            <listitem>
                <para>The image ID. For how to list images, see
                    <link xlink:href="http://docs.rackspace.com/servers/api/v2/cs-gettingstarted/content/list_images.html">
                    List Images</link>.</para>
            </listitem>
            <listitem>
                <para>The flavor ID. For how to list flavors, see
                    <link xlink:href="http://docs.rackspace.com/servers/api/v2/cs-gettingstarted/content/list_flavors.html">
                    List Flavors</link>.</para>
            </listitem>
            <listitem>
                <para>The network ID of your isolated network. This is the ID you copied in <olink
                        targetdoc="cn-gettingstarted" targetptr="nova_create_network_nova">“Create a network (nova-network
                        API/nova client)”</olink></para>
            </listitem>
        </itemizedlist>

        <para>You specify these values as parameters in a nova command or as attributes in the request body in a cURL
            command.</para>
        <note security="external">
            <para>You cannot attach an isolated network to an existing server. However, to work around this limitation, you
                can create an image of the server and build a new server based on that image. When you build the new server,
                you can attach the isolated network. For information, see
                <link xlink:href="http://www.rackspace.com/knowledge_center/article/attach-an-existing-cloud-server-to-a-cloud-network">
                <citetitle>Attach a Cloud Network to an Existing Cloud Server</citetitle></link>.
                To use the create image API, see
                <link xlink:href="http://docs.rackspace.com/servers/api/v2/cs-devguide/content/Create_Image-d1e4655.html">
                Create Image</link>.</para>
        </note>
        <note>
            <para>You can use the &virt_ext; to attach an isolated network to an existing server. For information, see <olink
                    targetdoc="cn-gettingstarted" targetptr="ch_gs_attach_network_to_server">Attach Your Network to an
                    Existing Server</olink>.</para>
        </note>

        <procedure>
            <title>To provision a server and attach an isolated network</title>
            <step>
                <para>Issue the following nova client command:
                    <programlisting language="bash" role="gutter: false"><?db-font-size 80%?>
                            <prompt>$</prompt> nova boot ServerAmp --flavor 1 --image 82e72de5-6366-4217-8c87-a570a9b17e73 --nic net-id=29f52c7e-6efd-4335-a14a-db77d32a2555</programlisting></para>
                <?sbr?>
                <para><emphasis role="bold">Output:</emphasis> The command returns information about the new server, as shown
                    in the following output:</para>
                <informalexample>
                    <screen><computeroutput>
+-------------------------+-----------------------------------------------------------------+
| Property                | Value                                                           |
+-------------------------+-----------------------------------------------------------------+
| OS-DCF:diskConfig       | AUTO                                                            |
| OS-EXT-STS:power_state  | 0                                                               |
| OS-EXT-STS:task_state   | scheduling                                                      |
| OS-EXT-STS:vm_state     | building                                                        |
| accessIPv4              |                                                                 |
| accessIPv6              |                                                                 |
| adminPass               | K3kviaHwhKqS                                                    |
| created                 | 2014-02-06T20:05:12Z                                            |
| flavor                  | m1.tiny (1)                                                     |
| hostId                  |                                                                 |
| id                      | fbcebd8c-5b4f-4087-a778-f5a6ffc4530f                            |
| image                   | cirros-0.3.0-x86_64-disk (82e72de5-6366-4217-8c87-a570a9b17e73) |
| metadata                | {}                                                              |
| name                    | ServerAmp                                                       |
| progress                | 0                                                               |
| security_groups         | default                                                         |
| status                  | BUILD                                                           |
| tenant_id               | 53501b3c25d34f8ea293c03298caed60                                |
| updated                 | 2014-02-06T20:05:12Z                                            |
| user_id                 | 28be72f8fc5b45589c93f55274e459ce                                |
+-------------------------+-----------------------------------------------------------------+</computeroutput></screen>
                </informalexample>

            </step>
        </procedure>

        <sidebar>
            <para><emphasis role="bold">Next step: </emphasis><olink targetdoc="cn-gettingstarted"
                    targetptr="bns_listserv_nova">“List servers (nova-network API/nova client)”</olink></para>
        </sidebar>
    </section>

    <!--The following section to list servers is same for neutron/neutron and nova-network-nova so it is included-->
    <xi:include href="net_bns_listserv_nova.xml"/>
</section>
