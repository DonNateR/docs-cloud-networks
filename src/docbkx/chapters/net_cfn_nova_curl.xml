<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
<!ENTITY % common  SYSTEM "../../common/common.ent">
%common;
]>
<section xml:id="cfn_nova_curl" xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:raxm="http://docs.rackspace.com/api/metadata" version="5.0">
    <title>Create network with nova-network API and cURL</title>
    <para>These sections walk you through creating your network and then listing networks and showing network details by
        using cURL.</para>
    <sidebar>
        <para><emphasis role="bold">Start here: </emphasis><olink targetdoc="cn-gettingstarted"
                targetptr="nova_create_network_curl">“Create a network with the nova-network API and cURL”</olink></para>
    </sidebar>
    <section xml:id="nova_create_network_curl">
        <title>Create a network (nova-network API/cURL)</title>
        <para>To create a network, you specify a name for your network. After you create a network, copy its network ID. You
            use this ID to create a subnet or attach the network to a server or port.</para>
        <para>To create an isolated network, you specify a name for your network and a Classless Inter-Domain Routing
                (<glossterm>CIDR</glossterm>), which is a range of IP addresses used by a network. A CIDR address looks like
            a normal IP address except that it ends with a slash followed by a number. The number after the slash represents
            the number of addresses in the range. For more information, see
            <link xlink:href="http://www.rackspace.com/knowledge_center/article/using-cidr-notation"><citetitle>CIDR
                Notation</citetitle></link>.</para>
        <para>For a full list of limitations for creating networks, see the Limitations section in
            <link xlink:href="http://docs.rackspace.com/servers/api/v2/cn-releasenotes/content/nova-boot.html">
            <citetitle>Cloud Networks Release Notes</citetitle></link>.</para>
        <para>You can request a JSON or XML response when you issue a request in a cURL command with the nova-network
            API.</para>
        <para>The following procedures show you how to create an isolated network by using cURL.</para>
        <procedure>
            <title>To create an isolated network with JSON</title>
            <step>
                <para>Issue the following cURL command:
                    <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -s https://dfw.servers.api.rackspacecloud.com/v2/$account/os-networksv2 \
       -X POST \
       -H "X-Auth-Project-Id: $account" \
       -H "Content-Type: application/json" \
       -H "Accept: application/json" \
       -H "X-Auth-Token: $token" \
       -d '{"network": {"cidr": "120.1.2.0/24", "label": "amp"}}' | python -m json.tool</programlisting></para>
                <para>In this cURL command, you specify several options. For information about options, see <olink
                        targetdoc="cn-gettingstarted" targetptr="curl_options">Table 2, “cURL Command-Line
                    Options”</olink>.</para>
                <para><emphasis role="bold">Output:</emphasis>
                </para>
                <para>The response returns the <glossterm>CIDR</glossterm>, ID, and label for the isolated network, as shown
                    in the following JSON response:
                    <programlisting language="json"><?db-font-size 85%?>
{
    "network": {
        "cidr": "120.1.2.0/24",
        "id": "29f52c7e-6efd-4335-a14a-db77d32a2555",
        "label": "amp"
    }
}                        
                    </programlisting></para>
            </step>
            <step>
                <para>Copy the ID value from the output. In this example, the ID value is
                        <literal>29f52c7e-6efd-4335-a14a-db77d32a2555</literal>, but use the value returned for your
                    network.</para>
                <para>You will use this value when you show network details or create a new server.</para>
            </step>
        </procedure>
        <procedure>
            <title>To create an isolated network with XML</title>
            <step>
                <para>Issue the following cURL command:
                    <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -i https://dfw.servers.api.rackspacecloud.com/v2/$account/os-networksv2.xml \
          -X POST -H "X-Auth-Project-Id: $account" -H "Content-Type: application/xml" \
          -H "Accept: application/xml" \
          -H "X-Auth-Token: $token" \
          -d '&lt;network cidr="120.1.2.0/24" label="amp" /&gt;'</programlisting></para>
                <para><emphasis role="bold">Output:</emphasis>
                </para>
                <para>The response returns the <glossterm>CIDR</glossterm>, ID, and label for the isolated network, as shown
                    in the following XML response:
                    <programlisting language="xml"><?db-font-size 85%?>
&lt;network>
    &lt;cidr>120.1.2.0/24&lt;/cidr>
    &lt;id>29f52c7e-6efd-4335-a14a-db77d32a2555&lt;/id>
    &lt;label>amp&lt;/label>
&lt;/network>                        
                    </programlisting></para>
            </step>
            <step>
                <para>Copy the ID value from the output. In this example, the ID value is
                        <literal>29f52c7e-6efd-4335-a14a-db77d32a2555</literal>, but use the value returned for your
                    network.</para>
                <para>You will use this value when you show network details or create a new server.</para>
            </step>
        </procedure>
        <sidebar>
            <para><emphasis role="bold">Next step: </emphasis><olink targetdoc="cn-gettingstarted"
                    targetptr="nova_list_networks_curl">“List networks (nova-network API/cURL)”</olink></para>
        </sidebar>
    </section>

    <section xml:id="nova_list_networks_curl">
        <title>List networks (nova-network API/cURL)</title>
        <para>After you create an isolated network, list networks to make sure it is listed along with the Rackspace
            networks.</para>
        <para>For information about the Rackspace networks, see <olink targetdoc="cn-gettingstarted" targetptr="networks"
                >“Limitations of detaching from Rackspace networks”</olink>.</para>
        <para>You can request a JSON or XML response when you issue a request in a cURL command with the nova-network
            API.</para>
        <para>The following steps shows you how to list networks by using cURL.</para>
        <procedure>
            <title>To list networks with JSON</title>
            <step>
                <para>Issue the following cURL command: <programlisting language="bash" role="gutter: false"><?db-font-size 75%?>
                        <prompt>$</prompt> curl https://dfw.servers.api.rackspacecloud.com/v2/$account/os_networksv2 \
       -X GET -H "X-Auth-Token: $token" | python -m json.tool</programlisting>
                    <emphasis role="bold">Output:</emphasis>
                </para>
                <para>For each isolated network, the response returns the <glossterm>CIDR</glossterm>. Additionally, for
                    isolated networks and Rackspace networks, the response returns the network ID and label.
                    <programlisting language="json"><?db-font-size 85%?>
{
    "networks":[
        {
            "cidr":"120.1.2.0/24",
            "id":"29f52c7e-6efd-4335-a14a-db77d32a2555",
            "label":"amp"
        },
        {
            "id":"00000000-0000-0000-0000-000000000000",
            "label":"public"
        },
        {
            "id":"11111111-1111-1111-1111-111111111111",
            "label":"private"
        }
    ]
}                        
                    </programlisting></para>
            </step>
        </procedure>
        <procedure>
            <title>To list networks with XML</title>
            <step>
                <para>Issue the following cURL command: <programlisting language="bash" role="gutter: false"><?db-font-size 75%?>
                        <prompt>$</prompt> curl https://dfw.servers.api.rackspacecloud.com/v2/$account/os_networksv2.xml \
       -H "Content-Type: application/xml" \ 
       -H "Accept: application/xml" \
       -X GET -H "X-Auth-Token: $token"</programlisting>
                    <emphasis role="bold">Output:</emphasis>
                </para>
                <para>For each isolated network, the response returns the <glossterm>CIDR</glossterm>. Additionally, for
                    isolated networks and Rackspace networks, the response returns the network ID and label.
                    <programlisting language="xml"><?db-font-size 85%?>
&lt;?xml version='1.0' encoding='UTF-8'?>
&lt;networks>
    &lt;network>
        &lt;cidr>120.1.2.0/24&lt;/cidr>
        &lt;id>29f52c7e-6efd-4335-a14a-db77d32a2555&lt;/id>
        &lt;label>amp&lt;/label>
    &lt;/network>
    &lt;network>
        &lt;id>00000000-0000-0000-0000-000000000000&lt;/id>
        &lt;label>public&lt;/label>
    &lt;/network>
    &lt;network>
        &lt;id>11111111-1111-1111-1111-111111111111&lt;/id>
        &lt;label>private&lt;/label>
    &lt;/network>
&lt;/networks>                    
                    </programlisting></para>
            </step>
        </procedure>
        <sidebar>
            <para><emphasis role="bold">Next step: </emphasis><olink targetdoc="cn-gettingstarted"
                    targetptr="nova_show_networks_curl">Show network details (nova-network API/cURL)L</olink></para>
        </sidebar>
    </section>

    <section xml:id="nova_show_networks_curl">
        <title>Show network details (nova-network API/cURL)</title>
        <para>The following step shows you how to show network details using cURL.</para>
        <para>You can request a JSON or XML response when you issue a request in a cURL command with the nova-network
            API.</para>
        <procedure>
            <title>To show information for a specified network ID with JSON</title>
            <step>
                <para>Issue the following cURL command:
                    <programlisting language="bash" role="gutter: false"><?db-font-size 65%?>
                            <prompt>$</prompt> curl https://dfw.servers.api.rackspacecloud.com/v2/$account/os-networksv2/29f52c7e-6efd-4335-a14a-db77d32a2555 \
        -X GET \
        -H "X-Auth-Project-Id: $account" \
        -H "Accept: application/json" \
        -H "Content-Type: application/json"\
        -H "X-Auth-Token: $token" | python -m json.tool</programlisting></para>
                <para><emphasis role="bold">Positional argument:</emphasis></para>
                <para>
                    <itemizedlist>
                        <listitem>
                            <para>The ID of the network for which you want to show information.</para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para><emphasis role="bold">Output:</emphasis></para>
                <para>The API operation returns the <glossterm>CIDR</glossterm>, network ID, and label, as shown in the
                    following output:</para>

                <programlisting language="json"><?db-font-size 85%?>
{
    "network": {
        "cidr": "120.1.2.0/24",
        "id": "29f52c7e-6efd-4335-a14a-db77d32a2555",
        "label": "amp"
    }
}                
                </programlisting>
            </step>
        </procedure>
        <procedure>
            <title>To show information for a specified network ID with XML</title>
            <step>
                <para>Issue the following cURL command:
                    <programlisting language="bash" role="gutter: false"><?db-font-size 65%?>
                            <prompt>$</prompt> curl https://dfw.servers.api.rackspacecloud.com/v2/$account/os-networksv2/29f52c7e-6efd-4335-a14a-db77d32a2555.xml \
        -X GET \
        -H "X-Auth-Project-Id: $account" \
        -H "Accept: application/xml" \
        -H "Content-Type: application/xml"\
        -H "X-Auth-Token: $token"</programlisting></para>
                <para><emphasis role="bold">Positional argument:</emphasis></para>
                <para>
                    <itemizedlist>
                        <listitem>
                            <para>The ID of the network for which you want to show information.</para>
                        </listitem>
                    </itemizedlist>
                </para>
                <para><emphasis role="bold">Output:</emphasis></para>
                <para>The API operation returns the <glossterm>CIDR</glossterm>, network ID, and label, as shown in the
                    following output:</para>

                <programlisting language="xml"><?db-font-size 85%?>
&lt;network>
    &lt;cidr>120.1.2.0/24&lt;/cidr>
    &lt;id>29f52c7e-6efd-4335-a14a-db77d32a2555&lt;/id>
    &lt;label>amp&lt;/label>
&lt;/network>                    
                </programlisting>
            </step>
        </procedure>
        <sidebar>
            <para><emphasis role="bold">Next step: </emphasis><olink targetdoc="cn-gettingstarted"
                    targetptr="boot_new_server">Boot a new server with your cloud network</olink></para>
        </sidebar>
    </section>
</section>
