<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section [
        <!-- Some useful entities borrowed from HTML -->
        <!ENTITY ndash  "&#x2013;">
        <!ENTITY mdash  "&#x2014;">
        <!ENTITY hellip "&#x2026;">
        
        <!-- Useful for describing APIs -->
        <!ENTITY GET    '<command xmlns="http://docbook.org/ns/docbook">GET</command>'>
        <!ENTITY PUT    '<command xmlns="http://docbook.org/ns/docbook">PUT</command>'>
        <!ENTITY POST   '<command xmlns="http://docbook.org/ns/docbook">POST</command>'>
        <!ENTITY DELETE '<command xmlns="http://docbook.org/ns/docbook">DELETE</command>'>
     
        <!ENTITY CIS 'Rackspace Cloud Identity Service'>
<!ENTITY fgCS 'first generation Cloud Servers'>
<!ENTITY ngCS 'next generation Cloud Servers'>
<!ENTITY cnresource1 'rax-networks'>
<!ENTITY virt_ext 'Cloud Networks virtual interface extension'>
<!ENTITY cnresource2 'os-networksv2'>
]>
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude"
    xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:raxm="http://docs.rackspace.com/api/metadata" version="5.0"
    xml:id="create_network">
    <title>Step 1. Create an Isolated Network</title>
    <para>Before you create a server, you create an isolated network that you can attach to your new server. </para>
    <para>To create an isolated network, you specify a name for your network and a Classless Inter-Domain Routing
            (<glossterm>CIDR</glossterm>). A CIDR is a range of IP addresses used by a network. A CIDR address looks like a
        normal IP address except that it ends with a slash followed by a number. The number after the slash represents the
        number of addresses in the range. For more information, see
        <link xlink:href="http://www.rackspace.com/knowledge_center/article/using-cidr-notation"><citetitle>CIDR
                Notation</citetitle></link>.</para>
    <itemizedlist>
        <title>Limitations</title>
        <listitem>
            <para>The isolated network must exist in the same region as the Cloud Server.</para>
        </listitem>
        <listitem>
            <para>You can create up to three isolated networks with up to 64 servers attached to each one.</para>
        </listitem>
        <listitem>
            <para>After you create an isolated network, you cannot rename it.</para>
        </listitem>
    </itemizedlist>

    <para>For a full list of limitations, see the
        <link xlink:href="http://docs.rackspace.com/servers/api/v2/cn-releasenotes/content/nova-boot.html">
            <citetitle>Cloud Networks Release Notes</citetitle></link>.</para>
    <para>After you create an isolated network, copy its network ID. You use this ID to attach the network to your server
        when you create your server.</para>
    <sidebar>
        <para><emphasis role="bold">Next step:</emphasis> Choose one of the following methods:<itemizedlist>
                <listitem>
                    <para><olink targetdoc="cn-gettingstarted" targetptr="nova_create_network">“Create an Isolated Network
                            with the nova Client ”</olink></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="cn-gettingstarted" targetptr="curl_create_network">“Create an Isolated Network
                            with cURL”</olink></para>
                </listitem>
            </itemizedlist></para>
    </sidebar>
    <section xml:id="nova_create_network">
        <title>Create an Isolated Network with the nova Client </title>
        <para>
            <procedure>
                <title>To create an isolated network with the nova client</title>
                <step>
                    <para>Issue the following command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 75%?>
                            <prompt>$</prompt> nova network-create &lt;network_label&gt; &lt;cidr&gt;</programlisting></para>
                    <para><emphasis role="bold">Positional arguments:</emphasis></para>
                    <para>
                        <itemizedlist>
                            <listitem>
                                <para><parameter>network_label</parameter>. The network label, such as
                                        <literal>my_new_network</literal>, </para>
                            </listitem>
                            <listitem>
                                <para><parameter>cidr</parameter>. The IP block from which to allocate, such as
                                        <literal>172.16.0.0/24</literal> or <literal>2001:DB8::/64</literal>.</para>
                            </listitem>
                        </itemizedlist>
                    </para>
                    <para><emphasis role="bold">Output:</emphasis></para>
                    <para>The command returns the CIDR, ID, and label for the new network, as shown in the following
                        output:</para>
                    <informalexample>
                        <screen><computeroutput><?db-font-size 75%?>+----------+--------------------------------------+
| Property | Value                                |
+----------+--------------------------------------+
| cidr     | 192.168.0.0/24                       |
| id       | 1f84c238-b05a-4374-a0cb-aa6140032cd1 |
| label    | new_network                          |
+----------+--------------------------------------+</computeroutput></screen>
                    </informalexample>

                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output. In this example, the <literal>id</literal>
                        value is <literal>1f84c238-b05a-4374-a0cb-aa6140032cd1</literal>, but use the value returned for your
                        network.</para>
                    <para>You will use this value when you provision your server in the next step.</para>
                </step>
            </procedure>
        </para>
        <sidebar>
            <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted" targetptr="list_networks"
                    >“Step 2. List Networks”</olink></para>
        </sidebar>
    </section>
    <?hard-pagebreak?>
    <section xml:id="curl_create_network">
        <title>Create an Isolated Network with cURL</title>
        <para>You can request a JSON or XML response when you issue a request in a cURL command.</para>
        <section xml:id="json_create_network">
            <title>JSON Request and Response</title>
            <procedure>
                <title>To create an isolated network and request a JSON response</title>
                <step>
                    <para>Issue the following cURL command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -s https://dfw.servers.api.rackspacecloud.com/v2/$account/&cnresource2; \
       -X POST \
       -H "X-Auth-Project-Id: $account" \
       -H "Content-Type: application/json" \
       -H "Accept: application/json" \
       -H "X-Auth-Token: $token" \
       -d '{"network": {"cidr": "192.168.0.0/24", "label": "superprivate"}}' | python -m json.tool</programlisting></para>
                    <para>In this cURL command, you specify several options. For information about options, see <olink
                            targetdoc="cn-gettingstarted" targetptr="curl_options">Table 2, “cURL Command-Line
                            Options”</olink>.</para>
                    <para><emphasis role="bold">Output:</emphasis>
                    </para>
                    <para>The response returns the <glossterm>CIDR</glossterm>, ID, and label for the isolated network, as
                        shown in the following JSON response:
                        <programlisting language="json"><?db-font-size 65%?>
                            <xi:include href="../../common/samples/create_network_resp.json" parse="text"/></programlisting></para>
                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output. In this example, the <literal>id</literal>
                        value is <literal>1f84c238-b05a-4374-a0cb-aa6140032cd1</literal>, but use the value returned for your
                        network.</para>
                    <para>You will use this value when you provision your server in the next step.</para>
                </step>
            </procedure>
            <sidebar>
                <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted"
                        targetptr="list_networks">“Step 2. List Networks”</olink></para>
            </sidebar>
        </section>
        <section xml:id="xml_create_network">
            <title>XML Request and Response</title>
            <procedure>
                <title>To create an isolated network and request a XML response</title>
                <step>
                    <para>Issue the following cURL command:
                        <programlisting language="bash" role="gutter: false"><?db-font-size 70%?>
                            <prompt>$</prompt> curl -i https://dfw.servers.api.rackspacecloud.com/v2/$account/os-networksv2.xml \
          -X POST -H "X-Auth-Project-Id: $account" -H "Content-Type: application/xml" \
          -H "Accept: application/xml" \
          -H "X-Auth-Token: $token" \
          -d '&lt;network cidr="192.168.0.0/24" label="superprivate_xml" /&gt;'</programlisting></para>
                    <para><emphasis role="bold">Output:</emphasis>
                    </para>
                    <para>The response returns the <glossterm>CIDR</glossterm>, ID, and label for the isolated network, as
                        shown in the following XML response:
                        <programlisting language="xml"><?db-font-size 65%?>
                            <xi:include href="../../common/samples/create_network_resp.xml" parse="text"/></programlisting></para>
                </step>
                <step>
                    <para>Copy the <literal>id</literal> value from the output. In this example, the <literal>id</literal>
                        value is <literal>1f84c238-b05a-4374-a0cb-aa6140032cd1</literal>, but use the value returned for your
                        network.</para>
                    <para>You will use this value when you provision your server in the next step.</para>
                </step>
            </procedure>
            <sidebar>
                <para><emphasis role="bold">Next step:</emphasis><olink targetdoc="cn-gettingstarted"
                        targetptr="list_networks">“Step 2. List Networks”</olink></para>
            </sidebar>
        </section>
    </section>
</section>
